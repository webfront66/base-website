<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
  <title>金色主题 100vh 无缝轮播</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .track{display:flex;transition:transform .6s ease;}
    .slide{flex:0 0 100%;height:100%;background-size:cover;background-position:center;}
  </style>
</head>
<body class="bg-gray-100">

<!-- 轮播容器 -->
<div id="carousel" class="relative w-full h-screen overflow-hidden">

  <!-- 轨道：首尾克隆实现无缝 -->
  <div id="track" class="track h-full">
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=3')]"></div>
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=1')]"></div>
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=2')]"></div>
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=3')]"></div>
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=1')]"></div>
  </div>

  <!-- 左右按钮：PC 显示 / 手机隐藏 -->
  <button id="prev"
          class="hidden md:flex absolute top-1/2 left-4 -translate-y-1/2 bg-black/30 text-white rounded-full px-3 py-2 text-2xl z-10">
    ‹
  </button>
  <button id="next"
          class="hidden md:flex absolute top-1/2 right-4 -translate-y-1/2 bg-black/30 text-white rounded-full px-3 py-2 text-2xl z-10">
    ›
  </button>

  <!-- 金色小圆点：始终显示 -->
  <div id="dots" class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10">
    <span data-index="0" class="dot w-3 h-3 rounded-full bg-[#E4AA3D] opacity-60 cursor-pointer"></span>
    <span data-index="1" class="dot w-3 h-3 rounded-full bg-[#E4AA3D] opacity-60 cursor-pointer"></span>
    <span data-index="2" class="dot w-3 h-3 rounded-full bg-[#E4AA3D] opacity-60 cursor-pointer"></span>
  </div>
</div>

<script>
  (() => {
    const DURATION = 2000;        // 2 秒轮播
    const track = document.getElementById('track');
    const slides = track.children;
    const dots = document.querySelectorAll('.dot');
    const total = slides.length;
    const width = 100;
    let index = 1;                // 从真实第 1 张开始

    /* 初始位置 */
    track.style.transform = `translateX(-${width}%)`;

    /* 更新圆点高亮 */
    const updateDots = i => {
      dots.forEach((d, idx) =>
              d.classList.toggle('opacity-100', idx === (i - 1 + 3) % 3) ||
              d.classList.toggle('opacity-60',  idx !== (i - 1 + 3) % 3)
      );
    };
    updateDots(index);

    /* 下一张（无缝） */
    const next = () => {
      index++;
      track.style.transition = 'transform .6s ease';
      track.style.transform = `translateX(-${index * width}%)`;

      track.addEventListener('transitionend', function handler() {
        if (index === total - 1) {
          track.style.transition = 'none';
          index = 1;
          track.style.transform = `translateX(-${width}%)`;
        }
        updateDots(index);
        track.removeEventListener('transitionend', handler);
      });
    };

    /* 上一张（无缝） */
    const prev = () => {
      index--;
      track.style.transition = 'transform .6s ease';
      track.style.transform = `translateX(-${index * width}%)`;

      track.addEventListener('transitionend', function handler() {
        if (index === 0) {
          track.style.transition = 'none';
          index = total - 2;
          track.style.transform = `translateX(-${index * width}%)`;
        }
        updateDots(index);
        track.removeEventListener('transitionend', handler);
      });
    };

    /* 点击圆点/按钮 */
    dots.forEach(d => d.addEventListener('click', () => go(+d.dataset.index + 1)));
    document.getElementById('next').addEventListener('click', next);
    document.getElementById('prev').addEventListener('click', prev);

    function go(i) {
      index = i;
      track.style.transition = 'transform .6s ease';
      track.style.transform = `translateX(-${index * width}%)`;
      updateDots(index);
    }

    /* 自动轮播 */
    let timer = setInterval(next, DURATION);
    const carousel = document.getElementById('carousel');
    carousel.addEventListener('mouseenter', () => clearInterval(timer));
    carousel.addEventListener('mouseleave', () => timer = setInterval(next, DURATION));
  })();
</script>
</body>
</html>