<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
  <title>Tailwind 100vh 无缝轮播</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* 让轨道可横向滚动，并隐藏滚动条 */
    .track {
      display:flex;
      transition:transform .6s ease;
    }
    .slide {
      flex:0 0 100%;
      height:100%;
      background-size:cover;
      background-position:center;
    }
  </style>
</head>
<body class="bg-gray-100">

<!-- 轮播容器 -->
<div class="relative w-full h-screen overflow-hidden" id="carousel">
  <!-- 轨道（首尾克隆 2 张图） -->
  <div class="track h-full" id="track">
    <!-- 克隆 3 -->
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=3')]"></div>
    <!-- 正常 1 2 3 -->
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=1')]"></div>
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=2')]"></div>
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=3')]"></div>
    <!-- 克隆 1 -->
    <div class="slide bg-[url('https://picsum.photos/1600/900?random=1')]"></div>
  </div>

  <!-- 左右按钮：移动端隐藏 -->
  <button id="prev"
          class="hidden md:flex absolute top-1/2 left-4 -translate-y-1/2 bg-black/40 text-white rounded-full px-4 py-2 text-2xl z-10">
    ‹
  </button>
  <button id="next"
          class="hidden md:flex absolute top-1/2 right-4 -translate-y-1/2 bg-black/40 text-white rounded-full px-4 py-2 text-2xl z-10">
    ›
  </button>
</div>

<script>
  (() => {
    /* ----------------- 唯一时间变量 ----------------- */
    const DURATION = 2000;   // 2 秒

    const track = document.getElementById('track');
    const slides = track.children;
    const total = slides.length;
    const width = 100;          // 百分比宽度
    let index = 1;              // 从“真实第 1 张”开始

    /* 初始定位到真实第 1 张（跳过克隆 3） */
    track.style.transform = `translateX(-${width}%)`;

    /* 无缝自动滚动 */
    function next() {
      index++;
      track.style.transition = 'transform .6s ease';
      track.style.transform = `translateX(-${index * width}%)`;

      /* 当滑到“克隆 1”时瞬间回真实 1（无缝） */
      track.addEventListener('transitionend', function handler() {
        if (index === total - 1) {
          track.style.transition = 'none';
          index = 1;
          track.style.transform = `translateX(-${width}%)`;
        }
        track.removeEventListener('transitionend', handler);
      });
    }

    function prev() {
      index--;
      track.style.transition = 'transform .6s ease';
      track.style.transform = `translateX(-${index * width}%)`;

      track.addEventListener('transitionend', function handler() {
        if (index === 0) {
          track.style.transition = 'none';
          index = total - 2;
          track.style.transform = `translateX(-${index * width}%)`;
        }
        track.removeEventListener('transitionend', handler);
      });
    }

    /* PC 端按钮事件 */
    document.getElementById('next').addEventListener('click', next);
    document.getElementById('prev').addEventListener('click', prev);

    /* 自动轮播 */
    let timer = setInterval(next, DURATION);
    /* 鼠标悬停暂停（移动端触摸暂停同理可扩展） */
    const carousel = document.getElementById('carousel');
    carousel.addEventListener('mouseenter', () => clearInterval(timer));
    carousel.addEventListener('mouseleave', () => timer = setInterval(next, DURATION));
  })();
</script>

</body>
</html>